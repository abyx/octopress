<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: devops | The Code Dump]]></title>
  <link href="http://www.codelord.net/category/devops/atom.xml" rel="self"/>
  <link href="http://www.codelord.net/"/>
  <updated>2012-03-25T20:33:29+02:00</updated>
  <id>http://www.codelord.net/</id>
  <author>
    <name><![CDATA[Aviv Ben-Yosef]]></name>
    <email><![CDATA[aviv.by+blog@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[How I Moved My WordPress Blog from Dreamhost to a Free EC2 Instance]]></title>
    <link href="http://www.codelord.net/2011/11/30/how-i-moved-my-wordpress-blog-from-dreamhost-to-a-free-ec2-instance/"/>
    <updated>2011-11-30T23:23:43+02:00</updated>
    <id>http://www.codelord.net/2011/11/30/how-i-moved-my-wordpress-blog-from-dreamhost-to-a-free-ec2-instance</id>
    <content type="html"><![CDATA[<p>Just recently my Dreamhost plan, the one this blog is hosted on, expired and I had to renew it. Seeing the amount of money they took charge me realize that surely I can find something cheaper than >$10/month. After some snooping around I've settled on moving my WordPress blog to EC2. This is my story.</p>

<p><em>Disclaimer: this worked for me. If you lose your blog, too bad. Backup is your friend, my friend. You need some devops-chops to follow along.</em></p>

<p>After being tipped of by a couple of friends, I decided to look into setting up my site on EC2. Basically, my blog is really small (the WordPress export file is about 2MB), and it's not like I get tons of traffic. That alone means that for a year now I can use the EC2 free tier, making this blog cost pretty much nothing.</p>

<h3>Initial setup</h3>

<p>First step was to register and AWS account. I created a micro instance, which is enough for most blogs and free for a year. The AMI (image) of the instance I used was Bitnami's prebundled WordPress image, which you can read more about <a href="http://bitnami.org/stack/wordpress">here</a>. Do make sure to create your instance on an EBS and not instance store. That means that the data will be persistent. Change the instance's security group to allow connections to port 80 (HTTP) and port 22 (SSH) from any IP.</p>

<p>You can assign a static IP to your instance for free! Just allocate a new Elastic IP on the EC2 console and attach it to your instance. Note that Elastic IPs cost nothing while attached, by if they aren't attached your bill will start growing (after all, fresh IPs are a rare resource).</p>

<p>So you've got your instance up, eh? You can point your browser to your instance's public DNS name, like so http://ec2-something-something.com/wordpress and see the default WordPress hello page. Go to /wordpress/wp-admin to login as admin (the default bitnami user/password are user/bitnami). Here you can start and setup your blog again.</p>

<h3>Importing</h3>

<p>On your original blog, you can use the export utility and then import all your posts and comments to the new machine. Easy as pie. If you have a lot of plugins and configurations, you might want to search for one of the many plugins that do that for you. If you're like me and only have a couple of plugins and one theme, installing them manually takes about 3 minutes.</p>

<h3>Moving WordPress to the root of the site</h3>

<p>If you'd like to move WordPress to the root of your site (/ instead of /wordpress), remove the path from the General settings page and then SSH to the machine. Replace the first two lines of the file /opt/bitnami/apps/wordpress/conf/wordpress.conf with:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='apache'><span class='line'><span class="nb">Alias</span> / <span class="s2">&quot;/opt/bitnami/apps/wordpress/htdocs/&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Then, go to /opt/bitnami/apache2 and do:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo ./bin/apachectl restart
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Gotchas</h3>

<p>Got permalinks? You'll need to:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>chmod g+rw /opt/bitnami/apps/wordpress/htdocs/.htaccess
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Want to receive email notification for new comments etc.? You'll need to do:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install sendmail &amp;amp;&amp;amp; sudo ln -s /usr/sbin/sendmail /usr/bin/sendmail
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>If you have attachments in any of your posts, you might need to fix the URL after the final move.</p>

<h3>Testing</h3>

<p>Make sure all your links, widgets etc. are working before making the final move. Post something, add a comment.</p>

<h3>Going live</h3>

<p>In the General settings panel, change the URL of the blog to your domain. Go to wherever you were hosted before, find the DNS panel and change the DNS entries for your blog. Danger: This is an "expert" step, and if you don't know what it means, I recommend grabbing someone with more knowledge. Change the A records for your domain to point at the elastic IP you gave your instance. That's it! Wait a bit for DNS propagation and everything should be working!</p>

<h3>Backups</h3>

<p>I found out about the <a href="http://wordpress.org/extend/plugins/wordpress-backup-to-dropbox/">backup to dropbox plugin</a>, which simply uploads all your blog to dropbox! Sweet, awesome and easy for small blogs!</p>

<h3>Costs</h3>

<p>So, using 1 micro instance with an EBS store of 10GB is free for the first year. Given nothing crazy in terms of network, you shouldn't be paying at all for the first year, maybe about $1 a month. After that year passes, the instace and EBS store start kicking in. If you're in it for the long run, like me, paying for the instance a year in advance costs about $9/month (3 years is like $7), and the EBS store costs $0.1 per GB, meaning $1. That's about $10-$8/month, depending on how you pay for the instance. A great save compared to Dreamhost!</p>

<p>You should <a href="http://feeds.feedburner.com/TheCodeDump">susbcribe</a> to my feed and <a href="http://twitter.com/avivby">follow</a> me on twitter!</p>
]]></content>
  </entry>
  
</feed>
